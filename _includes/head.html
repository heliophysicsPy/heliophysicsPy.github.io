<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="author" content="Steven D. Christe">
<meta name="description" content="">

<title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>

<!-- CSS -->
<!-- Latest compiled and minified Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<!-- Custom CSS -->
<link rel="stylesheet" href="{{ "/css/custom.css" | prepend: site.baseurl }}">
<!-- Favicon -->
<link rel="shortcut icon" type="image/png" href="../img/favicon.png">
<link rel="apple-touch-icon" href="../img/favicon.png" type="image/png">

<!-- Javascript -->
<!-- Latest compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js" integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js" integrity="sha384-XnTxmviuqUy3cHBf+lkYWuTSDlhxCDxd9RgSo5zvzsCq93P9xNa6eENuAITCwxNh" crossorigin="anonymous"></script>

<!-- Project sorting with DataTables-->
<script type="text/javascript" class="init">
    var table1;
    var table2;
    var searchValue1 = '';
    var searchValue2 = '';
    var selectValues1 = [];
    var selectValues2 = [];

    $(document).ready(function() {
        table1 = $('#dataTable1').DataTable({
            "ordering":  true,
            "paging":    false,
            "info":      false,
            "searching": true
        });
        
        table2 = $('#dataTable2').DataTable({
            "ordering":  true,
            "paging":    false,
            "info":      false,
            "searching": true
        });

        // Store value in first table's search box before searching
        $('#table_search1').keyup(function(e) {
            searchValue1 = $(this).val();
            tableSearch(1);
        });

        // Store value in second table's search box before searching
        $('#table_search2').keyup(function(e) {
            searchValue2 = $(this).val();
            tableSearch(2);
        });
    });

    /*
     * Given a table number, perform a smart search in that table
     * using the combined values of its search box and taxonomy drop-downs.
     */
     function tableSearch(tableNum) {
        let filterStr = "";
        switch(tableNum) {
            case 1:
                filterStr = searchValue1 + ' ' + selectValues1.join(' ');
                table1.search(filterStr).draw();
                break;
            case 2:
                filterStr = searchValue2 + ' ' + selectValues2.join(' ');
                table2.search(filterStr).draw();
                break;
            default:
                // Error, exit function
                console.error("Invalid table number found: " + tableNum);
                return;
        }
    }

    /*
     * Given the ID of a select drop-down, determine which table it belongs to 
     * by checking if it ends in "1" or "2", then collect all the defined values
     * of the selects for that table and filter the table using them.
     */
    function updateTaxonomyFilters(id) {
        let tableNum = id.slice(-1);

        if (!(tableNum == "1" || tableNum == "2")) {
            // Error, exit function
            console.error("Invalid table number found: " + tableNum);
            return;
        }

        let scienceArea = document.getElementById("tax_cat_1_" + tableNum).value;
        let functionality = document.getElementById("tax_cat_2_" + tableNum).value;
        let span = document.getElementById("tax_cat_3_" + tableNum).value;
        let inputOutputFormats = document.getElementById("tax_cat_4_" + tableNum).value;
        let inputSources = document.getElementById("tax_cat_5_" + tableNum).value;
        let intent = document.getElementById("tax_cat_6_" + tableNum).value;

        let selectValues = [scienceArea, functionality, span, inputOutputFormats, inputSources, intent];

        switch(tableNum) {
            case "1":
                // Store non-empty select values for first table before searching
                selectValues1 = selectValues.filter(function (v) { return v !== ''; });
                tableSearch(1);
                break;
            case "2":
                // Store non-empty select values for second table before searching
                selectValues2 = selectValues.filter(function (v) { return v !== ''; });
                tableSearch(2);
                break;
        }
    }

    /*
     * Show/hide taxonomy drop-down filters for the appropriate table.
     */ 
    function toggleFilters(id) {
        let tableNum = id.slice(-1);

        if (!(tableNum == "1" || tableNum == "2")) {
            // Error, exit function
            console.error("Invalid table number found: " + tableNum);
            return;
        }

        $filters = $("#taxonomy-filters" + tableNum);
        $button = $("#filter-toggle" + tableNum);
        $filters.slideToggle(300, function () {
            $button.text(function () {
                return $filters.is(":visible") ? "Hide Keyword Filters" : "Show Keyword Filters";
            });
        });
    }

    /*
     * Pretty print the given keyword for display.
     */
    function prettyPrintKeyword(keyword) {
        switch(keyword) {
            //special replacements
            case "ionosphere_thermosphere_mesosphere":
                return "Ionosphere/Thermosphere/Mesosphere";
            case "netcdf":
                return "NetCDF";
            //all caps replacements
            case "fits":
            case "cdf":
            case "ascii":
            case "idl_save":
            case "hdf5":
            case "csv":
                return keyword.toUpperCase().replace("_", " ");
            //capital first letter replacements
            default:
                return keyword
                    .split('_')
                    .map(function(word) {
                        return word[0].toUpperCase() + word.substr(1);
                    })
                    .join(' ');
        }
    }
</script>

{% seo %}